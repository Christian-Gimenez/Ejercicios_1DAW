CREATE DATABASE ventas;
USE ventas;
CREATE TABLE departamentos(
	dep_no INT PRIMARY KEY,
	dnombre VARCHAR(15),
	localidad VARCHAR(15)
);

CREATE TABLE productos(
	producto_no INT PRIMARY KEY,
	descripcion VARCHAR(50),
	precio FLOAT,
	stock INT
);

CREATE TABLE empleados(
	emp_no INT PRIMARY KEY,
	apellido VARCHAR(15),
	oficio VARCHAR(15),
	director INT,
	fecha_alta DATE,
	salario FLOAT,
	comision FLOAT,
	dep_no INT, 
	FOREIGN KEY(director) REFERENCES empleados(emp_no),
	FOREIGN KEY(dep_no) REFERENCES departamentos(dep_no)
);

CREATE TABLE clientes(
	cli_no INT PRIMARY KEY,
	nombre VARCHAR(30),
	localidad VARCHAR(15),
	vendedor_no INT,
	debe FLOAT,
	haber FLOAT,
	lim_credito FLOAT,
	FOREIGN KEY(vendedor_no) REFERENCES empleados(emp_no)
);

CREATE TABLE pedidos(
	pedido_no INT PRIMARY KEY,
	producto_no INT,
	cli_no INT,
	unidades INT,
	fecha DATE,
	FOREIGN KEY(producto_no) REFERENCES productos(producto_no),
	FOREIGN KEY(cli_no) REFERENCES clientes(cli_no)
);

# INSERTS
USE ventas;
INSERT INTO departamentos VALUES(10, 'CONTABILIDAD', 'BARCELONA');
INSERT INTO departamentos VALUES(20, 'INVESTIGACION', 'VALENCIA');
INSERT INTO departamentos VALUES(30, 'VENTAS', 'MADRID');
INSERT INTO departamentos VALUES(40, 'PRODUCCION', 'SEVILLA');

SELECT * FROM departamentos;
SELECT * FROM empleados;
INSERT INTO empleados VALUES
(7839, 'REY', 'PRESIDENTE', NULL, '2001-11-17', 6000.00, NULL, 10);
INSERT INTO empleados VALUES
(7698, 'GARRIDO', 'DIRECTOR', 7839, '2001-05-01', 3850.00, NULL, 30);
INSERT INTO empleados VALUES
(7782, 'MARTINEZ', 'DIRECTOR', 7839, '2001-06-09', 2450.00, NULL, 10);
INSERT INTO empleados VALUES
(7876, 'GIL', 'ANALISTA', 7782, '2002-05-06', 3350.00, NULL, 20);
INSERT INTO empleados VALUES
(7499, 'ALONSO', 'VENDEDOR', 7698, '2001-02-20', 1400.00, 400.00, 30);
INSERT INTO empleados VALUES
(7654, 'MARTIN', 'VENDEDOR', 7698, '2001-09-28', 1500.00, 1600.00, 30);
INSERT INTO empleados VALUES
(7844, 'CALVO', 'VENDEDOR', 7698, '2001-09-08', 1800.00, 0.00, 30);
INSERT INTO empleados VALUES
(7521, 'LOPEZ', 'EMPLEADO', 7782, '2001-05-08', 1350.00, NULL, 10);
INSERT INTO empleados VALUES
(7900, 'JIMENEZ', 'EMPLEADO', 7782, '2002-03-24', 1400.00, NULL, 20);

INSERT INTO clientes VALUES(101, 'DISTRIBUCIONES GOMEZ', 'MADRID', 7499, 0.00, 0.00, 5000.00),
(102, 'LOGISTRONICA S.L.', 'CADIZ', 7654, 0.00, 0.00, 5000.00),
(103, 'INDUSTRIAS AGRICOLAS S.A.', 'LAS ROZAS', 7844, 0.00, 0.00, 10000.00),
(104, 'TALLERES ESTESO S.A.', 'SEVILLA', 7654, 0.00, 0.00, 5000.00),
(105, 'EDICIONES SANZ', 'CADIZ', 7499, 0.00, 0.00, 5000.00),
(106, 'SIGNOLOGIC S.A.', 'MADRID', 7654, 0.00, 0.00, 5000.00),
(107, 'MARTIN Y ASOCIADOS S.L.', 'ARAVACA', 7844, 0.00, 0.00, 10000.00),
(108, 'MANUFACTURAS ALI S.A.', 'SEVILLA', 7654, 0.00, 0.00, 5000.00);

INSERT INTO productos VALUES(10, 'MESA DESPACHO MOD.GAVIOTA', 550.00, 50),
(20, 'SILLA DIRECTOR MOD.BUFALO', 670.00, 25),
(30, 'ARMARIO NOGAL 2 PUERTAS', 460.00, 20),
(40, 'MESA MOD.UNION', 340.00, 15),
(50, 'ARCHIVADOR CEREZO', 1050.00, 20),
(60, 'CAJA SEGURIDAD MOD.B222', 252.00, 15),
(70, 'DESTRUCTORA DE PAPEL A3', 450.00, 25),
(80, 'MODULO ORDENADOR MOD.ERGOS', 495.00, 25);

INSERT INTO pedidos VALUES
(1000, 20, 103, 3, '2021-10-06'),
(1001, 50, 106, 2, '2021-10-06'),
(1002, 10, 101, 4, '2021-10-07'),
(1003, 20, 105, 4, '2021-10-16'),
(1004, 40, 106, 8, '2021-10-20'),
(1005, 30, 105, 2, '2021-10-20'),
(1006, 70, 103, 3, '2021-11-03'),
(1007, 50, 101, 2, '2021-11-06'),
(1008, 10, 106, 6, '2021-11-16'),
(1009, 20, 105, 2, '2021-11-26'),
(1010, 40, 102, 3, '2021-12-08'),
(1011, 30, 106, 2, '2021-12-15'),
(1012, 10, 105, 3, '2021-12-06'),
(1013, 30, 106, 2, '2021-12-06'),
(1014, 20, 101, 4, '2022-01-07'),
(1015, 70, 105, 4, '2022-01-16');